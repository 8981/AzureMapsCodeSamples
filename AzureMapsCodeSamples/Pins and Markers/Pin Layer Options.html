<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />

    <!-- Add references to the Azure Maps Map control JavaScript and CSS files. -->
    <link rel="stylesheet" href="https://atlas.microsoft.com/sdk/css/atlas.min.css?api-version=1" type="text/css" />
    <script src="https://atlas.microsoft.com/sdk/js/atlas.min.js?api-version=1"></script>

    <script type='text/javascript'>
        var map, layerData = [], layerName = 'my-pin-layer';

        function GetMap() {
            map = new atlas.Map('myMap', {
                'subscription-key': '<subscriptionKey>',
            });

            for (var i = 0; i < 100; i++) {
                //Generate random locations.
                var lat = Math.random() * 170 - 85;
                var lng = Math.random() * 360 - 180;

                //Create a pin for each random location.
                var pin = new atlas.data.Feature(new atlas.data.Point([lng, lat]), {
                    title: 'Pin_' + i
                });
                layerData.push(pin);
            }

            updatePinLayer();
        }

        function updatePinLayer() {
            var icon = getSelectValue('Icon');
            var iconSize = parseFloat(document.getElementById('IconSize').value);

            var cluster = document.getElementById('Cluster').checked
            var clusterIcon = getSelectValue('ClusterIcon');

            var font = getSelectValue('TextFont');
            var fontSize = parseFloat(document.getElementById('FontSize').value);
            var fontColor = document.getElementById('FontColor').value;
            var textOffset = [
                parseFloat(document.getElementById('TextOffsetX').value),
                parseFloat(document.getElementById('TextOffsetY').value)
            ];

            //Remove the layer so that we can re-add it with new settings.
            map.removeLayers([layerName]);

            //Add layer to the map with the specified settings.
            map.addPins(layerData, {
                name: layerName,
                icon: icon,
                iconSize: iconSize,
                cluster: cluster,
                clusterIcon: clusterIcon,
                fontColor: fontColor,
                fontSize: fontSize,
                textOffset: textOffset
            });
        }

        function getSelectValue(id) {
            var elm = document.getElementById(id);
            return elm.options[elm.selectedIndex].value;
        }
    </script>
    <style>
        body {
            -ms-content-zooming: none;
            overflow: hidden;
            touch-action: none
        }

        .sidePanel {
            width: 350px;
            float: left;
            padding: 10px;
        }
    </style>
</head>
<body onload="GetMap()">
    <div class="sidePanel">
        <fieldset style="width:300px;margin-bottom:10px;">
            <legend>Pin Layer Options Sample</legend>
            This sample shows how the different options of the pin layer affect rendering.
        </fieldset>

        <table>
            <tr>
                <td>Icon:</td>
                <td>
                    <select id="Icon" onchange="updatePinLayer()">
                        <option value="pin-darkblue" selected="selected">pin-darkblue</option>
                        <option value="pin-blue">pin-blue</option>
                        <option value="pin-red">pin-red</option>
                        <option value="pin-round-darkblue">pin-round-darkblue</option>
                        <option value="pin-round-blue">pin-round-blue</option>
                        <option value="pin-round-red">pin-round-red</option>
                        <option value="none">none</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Icon Size:</td>
                <td>
                    <form oninput="a.value=IconSize.value">
                        <input type="range" id="IconSize" value="1" min="0.1" max="2" step="0.1" oninput="updatePinLayer()" onchange="updatePinLayer()" />
                        <output name="a" for="IconSize">1</output>
                    </form>
                </td>
            </tr>
            <tr>
                <td>Cluster: </td>
                <td><input type="checkbox" id="Cluster" checked="checked" onchange="updatePinLayer()" /></td>
            </tr>
            <tr>
                <td>Cluster Icon:</td>
                <td>
                    <select id="ClusterIcon" onchange="updatePinLayer()">
                        <option value="pin-darkblue" selected="selected">pin-darkblue</option>
                        <option value="pin-blue">pin-blue</option>
                        <option value="pin-red">pin-red</option>
                        <option value="pin-round-darkblue">pin-round-darkblue</option>
                        <option value="pin-round-blue">pin-round-blue</option>
                        <option value="pin-round-red">pin-round-red</option>
                        <option value="none">none</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Text Font:</td>
                <td>
                    <select id="TextFont" onchange="updatePinLayer()">
                        <option value="SegoeUi-Bold">SegoeUi-Bold</option>
                        <option value="SegoeUi-Regular" selected="selected">SegoeUi-Regular</option>
                        <option value="StandardFont-Bold">StandardFont-Bold</option>
                        <option value="StandardFont-Regular">StandardFont-Regular</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Font Color:</td>
                <td><input type="color" id="FontColor" onchange="updatePinLayer()"/></td>
            </tr>
            <tr>
                <td>Font Size:</td>
                <td>
                    <form oninput="b.value=FontSize.value">
                        <input type="range" id="FontSize" value="14" min="8" max="25" step="1" oninput="updatePinLayer()" onchange="updatePinLayer()" />
                        <output name="b" for="FontSize">14</output>
                    </form>
                </td>
            </tr>
            <tr>
                <td>Text Offset:</td>
                <td></td>
            </tr>
            <tr>
                <td>x:</td>
                <td>
                    <form oninput="x.value=TextOffsetX.value">
                        <input type="range" id="TextOffsetX" value="0" min="-30" max="30" step="1" oninput="updatePinLayer()" onchange="updatePinLayer()" />
                        <output name="x" for="TextOffsetX">0</output>
                    </form>
                </td>
            </tr>
            <tr>
                <td>y:</td>
                <td>
                    <form oninput="y.value=TextOffsetY.value">
                        <input type="range" id="TextOffsetY" value="0" min="-30" max="30" step="1" oninput="updatePinLayer()" onchange="updatePinLayer()" />
                        <output name="y" for="TextOffsetY">0</output>
                    </form>
                </td>
            </tr>
        </table>
    </div>

    <div id="myMap" style="position:relative;width:600px;height:600px;"></div>
</body>
</html>